(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/binding"],{1214:function(e,t,n){},"1ed7":function(e,t,n){"use strict";n.r(t);var o=n("fdc7"),s=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=s.a},"2b43":function(e,t,n){"use strict";var o=n("a68c"),s=n.n(o);s.a},"45f6":function(e,t,n){"use strict";n.r(t);var o=n("a49e"),s=n("1ed7");for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("2b43"),n("d3b4"),n("cdcd");var c,a=n("f0c5"),u=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,"ef705b7e",null,!1,o["a"],c);t["default"]=u.exports},a49e:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var s=function(){var e=this,t=e.$createElement;e._self._c},i=[]},a68c:function(e,t,n){},ac2b:function(e,t,n){},cdcd:function(e,t,n){"use strict";var o=n("1214"),s=n.n(o);s.a},d3b4:function(e,t,n){"use strict";var o=n("ac2b"),s=n.n(o);s.a},d56d:function(e,t,n){"use strict";(function(e){n("ebc2");o(n("66fd"));var t=o(n("45f6"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},fdc7:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{inArray:[],index:0,address:"",lydeviceId:"",children_name:"",aswitch:!0,deviceId:"",ipment:"",stateid:"",lyswitch:!1,user_phone:""}},onReady:function(){},onLoad:function(){},onShow:function(){this.selDeviceId(),this.obtain()},methods:{selDeviceId:function(){console.log(this.user_phone,"this.user_phone---696969");var e=this.$common.getStorages("user_phone");this.user_phone=e,e&&this.$http.glassesEst({url:"users/children",method:"GET",data:{phone:e}}).then((function(e){console.log(e.data,"res.data"),e.data.status}))},openls:function(){var e=getApp();this.stateid=e.globalData.stateid,console.log(this.stateid,"this.stateid")},obtain:function(){var t=e.getStorageSync("mac_address");this.deviceId=t,console.log(t,"this.mac_address--8899");var n=getApp();this.stateid=n.globalData.stateid},connect:function(){getApp();this.user_phone?this.connectDevice():this.lyswitch=!0},mitlog:function(){var e=this;/^1[3456789]\d{9}$/.test(this.user_phone)?this.$http.glassesEst({url:"users/children",method:"GET",data:{phone:this.user_phone}}).then((function(t){console.log(t,"res--查询成功"),200==t.data.status?(e.$common.setStorage("user_phone",e.user_phone),e.connectDevice()):e.$common.navigator("/pages/lanya/blebinding?user_phone="+e.user_phone),e.lyswitch=!1})):this.$common.showToast("请输入正确手机号")},connectDevice:function(){var t=this;console.log("进入1"),e.openBluetoothAdapter({success:function(n){e.showToast({title:"初始化成功",icon:"success",duration:800}),t.findBlue()},fail:function(t){e.showToast({title:"请打开蓝牙",type:"error",icon:"none"})}})},findBlue:function(){var t=this;console.log("进入2"),e.startBluetoothDevicesDiscovery({allowDuplicatesKey:!1,interval:0,success:function(n){e.showLoading({title:"正在搜索设备"}),t.getBlue()}})},getBlue:function(){var t=this;console.log("进入3",t.deviceId),e.onBluetoothDeviceFound((function(){e.getBluetoothDevices({success:function(e){for(var n=0;n<e.devices.length;n++)e.devices[n].deviceId==t.deviceId&&t.connetBlue(t.deviceId)},fail:function(){t.$common.showToast("搜索蓝牙设备失败")}})}))},connetBlue:function(){console.log("进入4");var t=this;e.createBLEConnection({deviceId:t.deviceId,success:function(n){e.showToast({title:"连接成功",icon:"fails",duration:800});var o=getApp();o.globalData.stateid=2,t.stateid=2,e.stopBluetoothDevicesDiscovery({success:function(e){console.log("连接蓝牙成功之后关闭蓝牙搜索")}}),t.testing()}})},testing:function(){console.log("进入5");var t=this;e.onBLEConnectionStateChange((function(e){if(0==e.connected){t.$common.showToast("蓝牙断开");var n=getApp();n.globalData.stateid=1,t.stateid=1}}))},closeBle:function(){console.log("进入6");var t=this;e.closeBLEConnection({deviceId:t.deviceId,success:function(e){var n=getApp();n.globalData.stateid=1,t.stateid=1}})}}};t.default=n}).call(this,n("543d")["default"])}},[["d56d","common/runtime","common/vendor"]]]);