(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/statistics"],{"29dd":function(t,e,i){},"3c71":function(t,e,i){},"4a36":function(t,e,i){"use strict";i.r(e);var a=i("873a"),n=i("f3bb");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("ec7a"),i("aebf");var r,o=i("f0c5"),c=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"691b0c0c",null,!1,a["a"],r);e["default"]=c.exports},"6a5c":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{phone:"",arrtitle:[],children_date:"",services:"00000001-0000-1000-8000-00805F9B34FB",wirerid:"00000002-0000-1000-8000-00805F9B34FB",noityid:"00000003-0000-1000-8000-00805F9B34FB",user_id:"",children_name:"",children_id:"",lyswitch:!1,visible:!1,listTime:"",beforetime:[],yeartime:[],monthtime:[],daytime:[],listIndex:0,aswitch:1,choicetime:"",chartData:{},infoDatatime:[],infoDatahour:[],devalue:0,showCanvas:"true",slideSwitch:"false",opts:{color:["#FBBD08","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],touchMoveLimit:30,enableScroll:!0,legend:{show:!1},xAxis:{disableGrid:!0,scrollShow:!0,itemCount:16,fontSize:12},yAxis:{data:[{min:0,tofix:0,calibration:!1}]},extra:{column:{type:"group",width:8,activeBgColor:"#000000",activeBgOpacity:.08,barBorderRadius:[50,50,50,50]}}}}},onLoad:function(){},onShow:function(){var e=this;t.getSystemInfo({success:function(t){e.width=.8*t.screenWidth}}),this.user_phone(),this.testing()},onReady:function(){},methods:{user_phone:function(){var e=t.getStorageSync("user_phone");this.children_ipmentid=t.getStorageSync("mac_address"),console.log(e,"this.children_ipmentid"),console.log(this.children_ipmentid,"this.children_ipmentid"),this.phone=e,e&&e&&this.user_info(e)},user_info:function(t){var e=this;this.$http.glassesEst({url:"users/children",method:"GET",data:{phone:t}}).then((function(t){if(200==t.data.status){console.log(t,"走了一");t=t.data.data.children[0];e.children_date=t.birthday,e.children_id=t.id,e.children_name=t.name,e.datetimes()}else e.$common.showToast(t.data.message)}))},times:function(){var t=this,e=t.typedArr("84640215556A");t.writeData(e);var i=this.arrlog();t.writeData(i)},sztimes:function(){var t=this,e=t.typedArr("816101aaaa");t.writeData(e)},notifyMy:function(){var e=this;t.showLoading({title:"数据同步中"});var i=this;i.arrtitle=[],i.deviceId=i.$common.getStorages("mac_address"),t.notifyBLECharacteristicValueChange({state:!0,deviceId:i.deviceId,serviceId:i.services,characteristicId:i.noityid,success:function(a){wx.onBLECharacteristicValueChange((function(a){var n=i.ab2hex(a.value);if(console.log(n,"resData"),i.title=n,"826201aaaa"!=n&&40==n.length){var s=i.typedArr("8262015555");i.writeData(s);for(var r=n,o="",c=0;c<r.length;c+=2){var d=r.slice(c,c+2);o+=c<=36?d+" ":d}i.arrtitle.push(o)}else if("826201aaaa"==n&&i.arrtitle.length>0)i.create1(i.arrtitle);else if("826201aaaa"==n&&0==i.arrtitle.length)i.$common.showToast("佩戴时间过短，没有数据");else if("806005"==n.slice(0,6))if("00"==n.slice(14,16)){e.aswitch=1;var h=e.listTime[0].date;e.obtainData(h,1),t.showToast({title:"同步成功",icon:"success",duration:2e3})}else"01"==n.slice(14,16)&&i.$common.showToast("设置时间失败，请重试")}))}}),setTimeout((function(){var t=i.typedArr("8262015555");i.writeData(t)}),100)},create1:function(t){var e=this,i=Math.round((new Date).getTime()/1e3).toString();this.$http.glassesEst({url:"uploads/create1",method:"POST",data:{child_id:this.children_id,records:t,device_time:i,platform:"webapp"}}).then((function(t){(t.data.status=200)?e.times():e.$common.showToast(t.data.message)}))},writeData:function(t){var e,i=this;e=t.buffer,wx.writeBLECharacteristicValue({deviceId:i.deviceId,serviceId:i.services,characteristicId:i.wirerid,value:e,success:function(t){console.log("首次写入特征数据---",t)},fail:function(t){}})},typedArr:function(t){var e=new Uint8Array(t.match(/[\da-f]{2}/gi).map((function(t){return parseInt(t,16)})));return e},ab2hex:function(t){for(var e=new Uint8Array(t),i="",a=0;a<e.length;a++)i+=e[a].toString(16).padStart(2,"0"),String.fromCharCode(e[a]);return i},testing:function(){},getServerData:function(t){this.infoDatahour=[],this.infoDatatime=[],this.infoDatahour=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],this.infoDatatime=t;var e={categories:this.infoDatahour,series:[{name:"数据",data:this.infoDatatime,padding:"6"}]};this.chartData=JSON.parse(JSON.stringify(e))},arrlog:function(){var t=Math.round((new Date).getTime()/1e3).toString(),e=new Uint8Array(8);return e[0]=128,e[1]=96,e[2]=4,e[3]=255&t,e[4]=t>>8&255,e[5]=t>>16&255,e[6]=t>>24&255,e[7]=e[3]+e[4]+e[5]+e[6],e},relieveData:function(){var e=this;t.showModal({title:"提示",content:"确定解除绑定吗？",success:function(t){console.log(e.children_id,"that.children_id"),t.confirm?e.$http.glassesEst({url:"users/unbind",method:"DELETE",data:{child_id:e.children_id}}).then((function(t){e.$common.showToast(t.data.message)})):t.cancel&&e.$common.showToast("取消")}})},cancel:function(){this.visible=!1},confirm:function(){if(1!=this.slideSwitch){this.visible=!1;var t=this.devalue;this.aswitch=1,this.choicetime=this.listTime[t].date,this.obtainData(this.choicetime,1)}else this.$common.showToast("请滚动结束后点击")},bindChange:function(t){t=t.detail.value;this.devalue=t},bindpickend:function(){this.slideSwitch=!1},pickstart:function(){this.slideSwitch=!0},listScreen:function(t){var e=this;e.listTime.forEach((function(t){e.beforetime.push(t.date)})),this.visible=!0,this.showCanvas=!1},datetimes:function(){this.listTime=this.$common.datetime(),this.choicetime=this.listTime[0].date,this.obtainData(this.choicetime,1)},obtainData:function(t,e){var i=this;console.log(t,"times---times"),console.log(this.children_id,"this.children_id"),this.$http.request({url:"getReportsDaily",method:"GET",header:{"Content-type":"multipart/form-data"},data:{date:t,child_id:this.children_id}}).then((function(t){1==e&&i.getServerData(t.data.data.bad_posture_data.bad_posture_times_hour),2==e&&i.getServerData(t.data.data.nearwork_data.nearwork_hour),3==e&&i.getServerData(t.data.data.lux_data.lux_hour),4==e&&i.getServerData(t.data.data.out_time_data.out_time_hour)}))},mit:function(){this.children_name?(t.showLoading({title:"绑定中"}),this.createUser()):this.$common.showToast("请输入用户姓名之后,点击确定")},tion:function(t){this.chartData={},this.aswitch=t,this.obtainData(this.choicetime,t)}}};e.default=i}).call(this,i("543d")["default"])},"873a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={qiunDataCharts:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(i.bind(null,"05da"))}},n=function(){var t=this,e=t.$createElement;t._self._c},s=[]},aebf:function(t,e,i){"use strict";var a=i("3c71"),n=i.n(a);n.a},d40b:function(t,e,i){"use strict";(function(t){i("ebc2");a(i("66fd"));var e=a(i("4a36"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},ec7a:function(t,e,i){"use strict";var a=i("29dd"),n=i.n(a);n.a},f3bb:function(t,e,i){"use strict";i.r(e);var a=i("6a5c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}},[["d40b","common/runtime","common/vendor"]]]);